<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.6.3.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Lobster&family=Nanum+Pen+Script&family=Single+Day&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css">
</head>
<body>
	<button type = "button" id = "btn1" class = "btn btn-info btn-sm">xml 데이터 읽기</button>
	<button type = "button" id = "btn2" class = "btn btn-info btn-sm">json 데이터 읽기</button>
	
	<br><hr><br>
	
	<button type = "button" id = "btn3" class = "btn btn-secondary btn-sm">xml 데이터 읽기</button>
	<button type = "button" id = "btn4" class = "btn btn-secondary btn-sm">json 데이터 읽기</button>
	
	<br><hr><br>
	
	<div class = "view">

	</div>
	<script>
		$("#btn1").click(function() {
			$.ajax({
				type: "get",
				url: "../data/ex3_arrdata.xml",
				dataType: "xml",
				success: function(res) {
					let s = ""
					$(res).find("stu").each(function(idx, element) {
						s += "이름: " + $(element).attr("name") + "<br>"
						s += "자바점수: " + $(element).find("java").text() + "<br>" 
						s += "스프링점수: " + $(element).find("spring").text() + "<br>" 
						s += "html점수: " + $(element).find("html").text() + "<br>" 
						s += "<hr>"
					})
					$(".view").html(s)
				},
				statusCode: {
					404: function() {
						alert("파일이 없어요")
					},
					500: function() {
						alert("서버 오류.. 다시한번 코드를 확인하세요")
					}
				}
			})
		})
		$("#btn2").click(function() {
			$.ajax({
				type: "get",
				url: "../data/ex4_arrdata.json",
				dataType: "json",
				success: function(res) {
					let s = ""
					$.each(res, function(idx, element) {
						s += "이름: " + element.name + "<br>"
						s += "취미: " + element.hobby + "<br>"
						s += "번호: " + element.hp + "<br>"
						s += "<hr>"
					})
					$(".view").html(s)
				},
				statusCode: {
					404: function() {
						alert("파일이 없어요")
					},
					500: function() {
						alert("서버 오류.. 다시한번 코드를 확인하세요")
					}
				}
			})
		})
		$("#btn3").click(function() {
			$.ajax({
				type: "get",
				url: "../data/testdata.xml",
				dataType: "xml",
				success: function(res) {
					let s = "총 " + $(res).find("sawon").length + "명<br>"
					$(res).find("sawon").each(function(idx, element) {
						s += "사원번호: " + $(element).attr("no") + "<br>"
						s += "부서: " + $(element).find("buseo").text() + "<br>"
						s += "수당: " + $(element).find("pay").attr("sudang") + "<br>"
						s += "연봉: "+ $(element).find("pay").text() + "<br>"
						s += "<hr>"
					})
					$(".view").html(s)
				},
				statusCode: {
					404: function() {
						alert("파일이 없어요")
					},
					500: function() {
						alert("서버 오류.. 다시한번 코드를 확인하세요")
					}
				}
			})
		})
		$("#btn4").click(function() {
			console.log(1)
			$.ajax({
				type: "get",
				url: "../data/testdata.json",
				dataType: "json",
				success: function(res) {
					let s = "총 " + res.length + " 명<br>"
					$.each(res, function(idx, element) {
						console.log(element.hobby)
						s += "이름: " + element.name + "<br>"
						s += "주소: " + element.addr + "<br>"
						if (element.hobby == null) {
							s += "취미 없음<br>"
						}
						else {
							$.each(element.hobby, function(i, e) {
								s += "[" + e + "]"
							})
							/* s += element.hobby + "<br>" */
						}
						s += "<hr>"
								
					})
					$(".view").html(s)
				},
				statusCode: {
					404: function() {
						alert("파일이 없어요")
					},
					500: function() {
						alert("서버 오류.. 다시한번 코드를 확인하세요")
					}
				}
			})
		})
	</script>
</body>
</html>